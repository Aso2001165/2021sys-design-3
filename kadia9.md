```uml
@startuml

opt 未登録
ユーザー -> webサーバー:ユーザー登録
webサーバー -> DBサーバー:ユーザー登録
DBサーバー -> DBサーバー:登録処理
DBサーバー -> webサーバー:登録結果

alt 登録成功
webサーバー -> ユーザー:登録メッセージを表示
else 登録失敗
webサーバー -> ユーザー:失敗メッセージを表示

end
end

@startuml
ユーザー -> webサーバー:ログイン
webサーバー -> DBサーバー:ログイン照会
DBサーバー -> DBサーバー:ログイン処理
DBサーバー -> webサーバー:認証結果

activate ユーザー
alt 認証成功
webサーバー -> ユーザー:ユーザー名を表示
else 認証失敗
webサーバー -> ユーザー:失敗メッセージを表示
end

ユーザー -> webサーバー:商品一覧
webサーバー -> DBサーバー：商品一覧読み込み
DBサーバー -> webサーバー:表示処理
webサーバー -> ユーザー:商品一覧表示

ユーザー -> webサーバー:商品詳細
webサーバー -> DBサーバー:商品詳細読み込み
DBサーバー -> DBサーバー:商品詳細表示処理
DBサーバー -> webサーバー:商品詳細表示

ユーザー -> webサーバー:商品購入
webサーバー -> DBサーバー:ユーザーの購入かごに追加
DBサーバー -> DBサーバー:追加処理
DBサーバー -> webサーバー:結果表示

ユーザー -> webサーバー:商品検索
webサーバー -> DBサーバー:商品検索
DBサーバー -> DBサーバー:検索処理
DBサーバー -> webサーバー:検索結果

ユーザー -> webサーバー:会計
webサーバー -> DBサーバー:ユーザーの購入商品検索
DBサーバー -> DBサーバー:ユーザーの購入かご表示
DBサーバー -> webサーバー:会計画面表示

@enduml
```
